@using PlanningPoker.Entities.Enums;
@using PlanningPoker.Utils.Extensions;

@model GameProgressViewModel

@{
    ViewData["Title"] = "Покер-планирование";
}

@section Styles {
    <bundle name="wwwroot/bundles/css/gamePage.bundle.css" />
}

@section Scripts {
    <bundle name="wwwroot/bundles/js/gameProcess.bundle.js" />
}

<input type="hidden" id="planning-poker-game-id" value="@Model.GameId" />

<div class="planning-poker-buttons-zone-wrapper">
    <div class="planning-poker-buttons-zone">
        <button class="btn btn-sm btn-primary planning-poker-button" id="planning-poker-spectate-button">Стать набдюдателем</button>
        <button class="btn btn-sm btn-success planning-poker-button" id="planning-poker-join-game-button">Вступить в игру</button>
    </div>
</div>

<div class="planning-poker-gamers-zone-wrapper">
    <div class="planning-poker-gamers-zone">
        <div class="planning-poker-gamer-score" my-card="true" user-id="@User.GetUserId()">

            <div class="planning-poker-card" card-state="unvoted">
            </div>

            <div class="planning-poker-gamer-name">
                @User.Identity.Name
            </div>

        </div>
    </div>
</div>

<div class="planning-poker-tasks-zone-wrapper">

    <div id="planning-poker-tasks-zone-task-header">
    </div>

    <div id="planning-poker-tasks-zone">
    </div>
</div>

<div id="planning-poker-gamer-card-zone">
    @foreach (var card in Model.Cards)
    {
        <div class="planning-poker-card planning-poker-card-clickable @MapColorToClass(card.Color)" score="@card.Score">
            @card.Text
        </div>
    }
</div>

@{
    string MapColorToClass(CardColorEnum color)
    {
        switch (color)
        {
            case CardColorEnum.Green:
                return "planning-poker-card-color-green";
            case CardColorEnum.Yellow:
                return "planning-poker-card-color-yellow";
            case CardColorEnum.Red:
                return "planning-poker-card-color-red";
            case CardColorEnum.Gray:
                return "planning-poker-card-color-gray";
            default:
                return string.Empty;
        }
    }
}
